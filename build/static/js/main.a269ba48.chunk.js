(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{44:function(e,n,t){},45:function(e,n,t){"use strict";t.r(n);var c=t(18),a=t(3),r=t(2),o=t(4),u=t.n(o),i="/api/persons",s=function(){return u.a.get(i).then((function(e){return e.data}))},l=function(e){return u.a.post(i,e).then((function(e){return e.data}))},d=function(e,n){return u.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},f=function(e){return u.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},h=t(0),j=function(e){var n=e.filter,t=e.handleChange;return Object(h.jsxs)("div",{children:["filter shown with: ",Object(h.jsx)("input",{value:n,onChange:t})]})},m=function(e){var n=e.persons,t=e.filter,c=e.removePerson,a=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(h.jsx)(h.Fragment,{children:a.map((function(e){return Object(h.jsxs)("p",{children:[e.name," ",e.number,Object(h.jsx)("button",{onClick:function(){return c(e)},children:"delete"})]},e.name)}))})},b=function(e){var n=e.text,t=e.newValue,c=e.handleChange;return Object(h.jsxs)("div",{children:[n," ",Object(h.jsx)("input",{value:t,onChange:c})]})},O=function(e){return Object(h.jsxs)("form",{onSubmit:e.addPerson,children:[Object(h.jsx)(b,{text:"name:",newValue:e.newName,handleChange:e.handleNameChange}),Object(h.jsx)(b,{text:"number:",newValue:e.newNumber,handleChange:e.handleNumberChange}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},v=(t(44),function(e){var n=e.message,t=e.error;return null===n?null:t?Object(h.jsx)("div",{className:"error",children:n}):Object(h.jsx)("div",{className:"notification",children:n})}),x=function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),u=Object(a.a)(o,2),i=u[0],b=u[1],x=Object(r.useState)(""),p=Object(a.a)(x,2),g=p[0],w=p[1],C=Object(r.useState)(""),N=Object(a.a)(C,2),S=N[0],T=N[1],k=Object(r.useState)(null),y=Object(a.a)(k,2),P=y[0],D=y[1],I=Object(r.useState)(!1),V=Object(a.a)(I,2),E=V[0],J=V[1];Object(r.useEffect)((function(){s().then((function(e){c(e)}))}),[]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(v,{message:P,error:E}),Object(h.jsx)(j,{filter:S,handleChange:function(e){T(e.target.value)}}),Object(h.jsx)("h2",{children:"add a new"}),Object(h.jsx)(O,{addPerson:function(e){e.preventDefault();var n={name:i,number:g};if(t.some((function(e){return e.name===i}))){if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var a=t.find((function(e){return e.name===i})),r={name:a.name,number:g},o=a.id;d(o,r).then((function(e){c(t.map((function(n){return n.id!==o?n:e}))),b(""),w(""),J(!1),D("Changed ".concat(e.name)),setTimeout((function(){D(null)}),4e3)})).catch((function(){c(t.filter((function(e){return e.id!==o}))),J(!0),D("Information of ".concat(a.name," has already been removed from server")),setTimeout((function(){D(null)}),5e3)}))}}else l(n).then((function(e){c(t.concat(e)),b(""),w(""),J(!1),D("Added ".concat(e.name)),setTimeout((function(){D(null)}),4e3)})).catch((function(e){var n=e.response.data.error;J(!0),D("".concat(n)),setTimeout((function(){D(null)}),5e3)}))},newName:i,handleNameChange:function(e){b(e.target.value)},newNumber:g,handleNumberChange:function(e){w(e.target.value)}}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(m,{persons:t,filter:S,removePerson:function(e){if(window.confirm("Delete ".concat(e.name))){var n=e.id;f(n).then((function(){c(t.filter((function(e){return e.id!==n}))),J(!1),D("Deleted ".concat(e.name)),setTimeout((function(){D(null)}),4e3)})).catch((function(){J(!0),D("Information of ".concat(e.name," has already been removed from server")),setTimeout((function(){D(null)}),5e3)}))}}})]})};Object(c.createRoot)(document.getElementById("root")).render(Object(h.jsx)(x,{}))}},[[45,1,2]]]);
//# sourceMappingURL=main.a269ba48.chunk.js.map